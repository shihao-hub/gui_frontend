from datetime import datetime

from nicegui import ui

TITLE = "å·¥ä½œæ—¥è®¡ç®—"
ICON = "event"


class Widget:
    def __init__(self, parent):
        self.parent = parent

    def init_widget(self):
        def calculate_workdays():
            # è¿™é‡Œå®ç°å·¥ä½œæ—¥è®¡ç®—é€»è¾‘
            result_label.text = f"{year_select.value}å¹´å·¥ä½œæ—¥æ•°ï¼š..."

        with self.parent.classes('flex flex-col items-center justify-center h-full p-4'):  # çˆ¶å®¹å™¨å±…ä¸­
            # å·¥å…·1: å·¥ä½œæ—¥è®¡ç®—
            with ui.card().classes('''
                w-full max-w-md 
                shadow-lg rounded-lg
                bg-blue-50
                transition-all hover:shadow-xl
            '''):
                # å¡ç‰‡å¤´éƒ¨
                with ui.card_section().classes('bg-blue-100/50 border-b'):
                    ui.label('ğŸ“… å¹´åº¦å·¥ä½œæ—¥ç»Ÿè®¡').classes('text-xl font-bold text-blue-800')

                # å¡ç‰‡å†…å®¹
                with ui.card_section().classes('space-y-4 p-4'):
                    # å¹´ä»½é€‰æ‹©è¡Œ
                    with ui.row().classes('items-center justify-between w-full'):
                        ui.label('é€‰æ‹©å¹´ä»½ï¼š').classes('text-gray-600')
                        year_select = ui.select(
                            [str(datetime.now().year - 1), str(datetime.now().year)],
                            value=str(datetime.now().year)
                        ).classes('w-32 rounded-md border-gray-300')

                    # ç»“æœå±•ç¤ºï¼ˆå¸¦åŠ¨æ€æ ·å¼ï¼‰
                    result_label = ui.label().classes('''
                        text-2xl font-mono text-center py-2
                        bg-white rounded-lg border
                        transition-all duration-300
                    ''')

                    # æ“ä½œæŒ‰é’®
                    ui.button('å¼€å§‹è®¡ç®—',
                              on_click=calculate_workdays,
                              color='primary'
                              ).classes('w-full h-10 rounded-lg hover:bg-blue-700')


def init_widget(parent):
    Widget(parent).init_widget()
